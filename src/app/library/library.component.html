<body>
<div class="library-container">
  <div class="library-header">
    <!-- Back button only visible when inside a folder -->
    <button *ngIf="currentFolder" mat-icon-button (click)="navigateToRoot()">
      <mat-icon>arrow_back</mat-icon>
    </button>

    <!-- Show search results if searchActive is true -->
    <div *ngIf="searchActive">
      <h2>Search Results</h2>

      <!-- If files or folders are found, display them -->
      <div *ngIf="filteredFiles.length > 0 || filteredFolders.length > 0">
        <div class="folders-container">
          <div class="folder-item" *ngFor="let folder of filteredFolders"  (click)="navigateToFolder(folder)">
            <mat-icon class="folder-icon">folder</mat-icon>
            <p class="folder-name">{{ folder.name }}</p>
          </div>
        </div>

        <div class="files-container">
          <h3>Files</h3>
          <div *ngFor="let file of filteredFiles" class="file-item"    (click)="openFile(file)">
            <mat-icon class="file-icon">insert_drive_file</mat-icon>
            <p class="file-name">{{ file.fileName }}</p>
          </div>
        </div>
      </div>

      <!-- If nothing is found, show message -->
      <div *ngIf="filteredFiles.length === 0 && filteredFolders.length === 0">
        <p>No results found.</p>
      </div>
    </div>

    <div *ngIf="!searchActive">
    <h2>Library</h2>
  </div>

  <!-- Add Button Component: Visible for all folders, including root -->
  <app-add-button
    [currentFolder]="currentFolder"
    (folderCreated)="onFolderCreated($event)"
    (fileUploaded)="onFileUploaded($event)">
  </app-add-button>

  <!-- Display Folders -->
  <div class="folders-container">
    <div
      class="folder-item"
      *ngFor="let folder of folders"
      (click)="navigateToFolder(folder)"
      (contextmenu)="onRightClick($event, folder, 'folder')"
      (swiperight)="onSwipeLeft(folder, 'folder')"
      (dragover)="onDragOverFolder($event)"
      (drop)="onDropFile($event, folder)">

<!--      <mat-icon class="folder-icon">folder_open</mat-icon>-->
      <p class="folder-name">{{ folder.name }}</p>
    </div>
  </div>

  <!-- Display Files -->
  <div class="files-container">
    <h3>Files</h3>
    <!-- Icon for Files Section (displayed once, you can remove this part if not needed anymore) -->
    <!-- <mat-icon class="file-icon">insert_drive_file</mat-icon> -->

    <!-- List of Files -->
    <div *ngFor="let file of files" class="file-item">
      <!-- File icon next to each file -->
      <mat-icon class="file-icon">insert_drive_file</mat-icon>
      <p
        class="file-name"
        draggable="true"
        (click)="openFile(file)"
        (contextmenu)="onRightClick($event, file, 'file')"
        (swipeleft)="onSwipeLeft(file, 'file')"
        (dragstart)="onDragStartFile($event, file)">
        {{ file.fileName }}
      </p>
    </div>
  </div>

<!--  &lt;!&ndash; Context Menu for Right Click (Delete) &ndash;&gt;-->
<!--  <div class="context-menu" *ngIf="contextMenuVisible" [style.top.px]="contextMenuY" [style.left.px]="contextMenuX">-->
<!--    <button (click)="deleteItem(contextMenuItem)">Delete</button>-->
<!--  </div>-->
</div>
</div>

</body>
